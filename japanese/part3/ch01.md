# 射のすべて

まだ圏論は射に関するものだと納得していないなら、私の仕事が不十分だったようだ。次の話題である随伴 (adjunction) は、hom集合の同型射によって定義されるため、hom集合の構成単位についての直観を見直すことは理にかなっている。また、これまで見てきた多くの構成は、随伴が提供するさらに一般的な言語によって詳しく記述できるため、それらも復習すると役立つだろう。

## 関手

まず始めに、本当に関手を射の写像と考えるべきだ――Haskellの`Functor`型クラスの定義で強調されている考え方で、`fmap`を中心に展開している。当然、関手は対象――射の終点――も写す。そうでなければ、合成の保存について話せない。対象は射のどのペアが合成可能か教えてくれる。一方の射の終対象がもう一方の始対象と等しくなければ合成できない。したがって、射の合成を[リフトされた]{.keyword #lifted}射の合成に写したい場合、それらの終点の写像は十分に決定される。

## 可換図式

射の多くの性質は可換図式によって表される。もし特定の射が他の射の合成として複数の方法で記述できるなら、可換図式があることになる。

特に、可換図式はほとんどすべての普遍構成の基礎となっている (始対象と終対象という例外を除く)。このことはすでに、積、余積、その他さまざまな (余) 極限、冪乗対象、自由モノイドなどの定義で見てきた。

積は普遍構成の簡単な例だ。2つの対象$a$と$b$を選択し、対象$c$がペアの射$p$と$q$を伴って存在し、積となる普遍性を持つかを確認する。

![](images/productranking.jpg){width=30%}

積は極限の特別な場合だ。極限は錐によって定義される。一般的な錐は可換図式から作成される。それらの図式の可換性は、関手の写像のための適切な自然条件で置き換えてよい。このようにして、可換性は自然変換という高水準言語に対するアセンブリ言語の役割に降格される。

## 自然変換

一般に、自然変換は射から可換正方図式への写像が必要なときに非常に便利だ。自然性の正方図式の対辺は、ある射$f$を2つの関数$F$と$G$で写したものだ。他の辺は自然変換のコンポーネントだ (射でもある)。

![](images/3_naturality.jpg){width=35%}

自然性は、「隣接する」 (射でつながった) コンポーネントに移っても、圏や関手の構造に逆らわないことを意味する。まず自然変換のコンポーネントを使って対象間のギャップを埋めてから関手を使って隣の対象にジャンプするのでも、その逆でも関係ない。2つの方向は直交している。いうなれば、自然変換では左右に動けて、関手では上下や前後に動ける。関手の*像*は、対象となる圏でのシートとして視覚化できる。自然変換はFに対応するシートをGに対応する別のシートに写す。

![](images/sheets.png){width=35%}

Haskellにおけるこの直交性の例を見た。そこでは、関手の作用はコンテナの形状を変更せずに内容を変更し、自然変換は内容を変更せずに別のコンテナに再パッケージした。これらの操作の順序は関係ない。

極限の定義の中で錐が自然変換に置き換えられるのを見た。自然性はすべての錐について側面が可換なのを保証する。さらに、極限は錐の*間の*写像によって定義される。これらの写像は可換性条件も満たす必要がある。(たとえば、積の定義における三角形は可換である必要がある)。

これらの条件も自然性によって代替できる。*普遍な*錐、すなわち極限は、(反変) hom関手間の自然変換として定義されていたのを思い出すだろう:

$$F \Colon c \to \cat{C}(c, \Lim{D})$$

また、(反変) 関手は、$\cat{C}$内の対象を、それ自体が自然変換である錐に写す。

$$G \Colon c \to \cat{Nat}(\Delta_c, D)$$

ここで、$\Delta_c$は定関手、$D$は$\cat{C}$での図式を定義する関手だ。関手$F$と$G$は両方とも、$\cat{C}$の射に対する作用が明確に定義されている。$F$と$G$の間の特定の自然変換が*同型射*なのは偶然だ。

## 自然同型

自然同型――すべてのコンポーネントが可逆な自然変換――は、圏論で「2つのものは同じである」と言うときの言い方だ。そのような変換のコンポーネントは対象間の同型射――逆が存在する射――でなければならない。関手の像をシートとして表す場合、自然同型はシート間の1対1の可逆な写像だ。

## Hom集合

それにしても、射とは何だろう？
射には対象よりも多くの構造がある。対象とは違って、射には2つの端がある。しかし、始対象と終対象を固定すると、それら2つの間の射は退屈な集合を (少なくとも局所的に小さい圏では) 形成する。この集合の要素を区別するために$f$や$g$のような名前を付けることはできるが、実際のところ、何が異なるのだろう？


あるhom集合の射の間の本質的な差異は、(隣接するhom集合からの) 他の射と合成する方法にある。ある射$h$を$f$に (前置または後置) 合成したものと$g$に合成したものが異なる場合、すなわち:

$$h \circ f \neq h \circ g$$

ならば、$f$と$g$の違いを直接「観察」できる。しかし、違いが直接観察できない場合でも、関手を使えばhom集合にズームインできる。関手$F$は2つの射を別々の射に写せる:

$$F f \neq F g$$

これらの射が属する圏はより豊かで、隣接するhom集合の分解能がより高い。たとえば:

$$h' \circ F f \neq h' \circ F g$$

ここで、$h'$は$F$の像に含まれない。

## Hom集合同型

圏論では多くの構造がhom集合間の同型射に依存している。しかし、hom集合はただの集合なので、それらの間の同型射から分かることはあまりない。有限集合については、同型射は要素数が同じだと示すだけだ。無限集合なら、濃度が同じでなければならない。しかし、hom集合の意味のある同型射はすべて、合成も考慮しなければならない。そして、合成には複数のhom集合が関わる。あらゆるhom集合にまたがる同型射を定義する必要があり、合成と相互運用する何らかの互換性条件を課す必要がある。そして、[自然]{.keyword #natural}同型はその条件にぴったり合う。

だが、hom集合の自然同型とは何だろう？
自然性は、集合間ではなく、関手間の写像の特性だ。つまり、今はhom集合値関手の間の自然同型について話している。それらの関手は単なる集合値関手ではない。射に対するその作用は、適切なhom関手によって導かれる。射はhom関手によって、前置合成か後置合成のどちらかで (合成の変性に依存して) 正準的に写される。

米田埋め込みはそのような同型射の一例だ。それは$\cat{C}$のhom集合を関手圏のhom集合に写す。そしてそれは自然だ。米田埋め込みの関手は、1つは$\cat{C}$のhom関手で、もう1つは対象をhom集合間の自然変換の集合に写す。

極限の定義もhom集合間の自然同型だ (2番目がやはり関手圏内にある)。

$$\cat{C}(c, \Lim{D}) \simeq \cat{Nat}(\Delta_c, D)$$

冪乗対象や自由モノイドの構成も、hom集合間の自然同型として書き直せることが分かる。

これは偶然の一致ではない――次に見るように、これらはhom集合の自然同型として定義される随伴の様々な例にすぎない。

## Hom集合の非対称性

随伴を理解するのに役立つ観察がもう1つある。Hom集合は一般に対称ではない。Hom集合$\cat{C}(a, b)$ は、hom集合$\cat{C}(b, a)$ と大きく異なることがよくある。この非対称性の究極の例は、半順序を圏とみなすことだ。半順序では、$a$が$b$以下の場合に限り、$a$から$b$への射が存在する。$a$と$b$が異なる場合、$b$から$a$へと逆方向に進む射は存在しない。Hom集合$\cat{C}(a, b)$ が空集合でない (ここでは単集合を意味する) なら、$a = b$でない限り、$\cat{C}(b, a)$ は空でなければならない。この圏の矢の流れは一方向に決まっている。

関係が反対称でなくてもよい前順序も、たまにある循環を除けば「ほとんど」方向付けられている。任意の圏を前順序の一般化と見なすのは便利だ。

前順序はやせた圏だ――すべてのhom集合が単集合か空集合のどちらかだ。一般の圏は「厚い」(thick) 前順序として視覚化できる。

## 課題

1. 自然条件の縮退した例を考え、適切な図を描け。たとえば、関手$F$または$G$のどちらかが対象$a$と$b$ ($f \Colon a \to b$の終わり) の両方を同じ対象に、$F a = F b$または$G a = G b$のように写したらどうなるか？
   (この方法で錐または余錐が得られることに注目してほしい。)
   次に、$F a = G a$または$F b = G b$のどちらかの場合について考えよ。最後に、自分自身へループする射$f \Colon a \to a$から始めた場合はどうか？

